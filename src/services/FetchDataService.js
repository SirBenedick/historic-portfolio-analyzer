import axios from "axios";
import dataStore from "../stores/DataStore";
const iex_url = "https://sandbox.iexapis.com/stable/";
const symbol_appel = "AAPL";
const time = "5d";
const token = "-";

class FetchDataService {
  convertIEXDataToChartFormat(data) {
    return data.map((entry) => ({ time: entry.date, value: entry.close }));
  }

  async fetchApple() {
    // let res = await axios.get(`${iex_url}stock/${symbol_appel}/chart/${time}?token=${token}`, { params: { chartCloseOnly: true } })
    let res = { data: example_3month };

    console.log("fetched service");
    dataStore.setAppleData(this.convertIEXDataToChartFormat(res.data));
    return true;

  }
}

const fetchDataService = new FetchDataService();
export default fetchDataService;

const exampleData = [
  { date: "2020-09-30", close: 121.04, volume: 144947820, change: 0, changePercent: 0, changeOverTime: 0 },
  {
    date: "2020-10-01",
    close: 120.78,
    volume: 119725933,
    change: 1.01,
    changePercent: 0.874,
    changeOverTime: 0.008774,
  },
  {
    date: "2020-10-02",
    close: 115.73,
    volume: 148040370,
    change: -3.96,
    changePercent: -3.328,
    changeOverTime: -0.024413,
  },
  { date: "2020-10-05", close: 122, volume: 108688298, change: 3.5, changePercent: 3.1091, changeOverTime: 0.006101 },
  {
    date: "2020-10-06",
    close: 116,
    volume: 162079361,
    change: -3.36,
    changePercent: -2.925,
    changeOverTime: -0.023326,
  },
  {
    date: "2020-10-07",
    close: 116.8,
    volume: 98166930,
    change: 1.99,
    changePercent: 1.7291,
    changeOverTime: -0.006606,
  },
  {
    date: "2020-10-08",
    close: 117.12,
    volume: 83997467,
    change: -0.11,
    changePercent: -0.0991,
    changeOverTime: -0.007514,
  },
  { date: "2020-10-09", close: 118.6, volume: 101444400, change: 2, changePercent: 1.8091, changeOverTime: 0.010242 },
  { date: "2020-10-12", close: 129.3, volume: 248420801, change: 7.63, changePercent: 6.3794, changeOverTime: 0.07493 },
  {
    date: "2020-10-13",
    close: 122.1,
    volume: 273933030,
    change: -3.4,
    changePercent: -2.7419,
    changeOverTime: 0.045989,
  },
  {
    date: "2020-10-14",
    close: 123.86,
    volume: 153206659,
    change: 0.09,
    changePercent: 0.0746,
    changeOverTime: 0.046954,
  },
  {
    date: "2020-10-15",
    close: 123.69,
    volume: 115250969,
    change: -0.48,
    changePercent: -0.4053,
    changeOverTime: 0.043692,
  },
  { date: "2020-10-16", close: 122.85, volume: 116847038, change: -1.7, changePercent: -1.4, changeOverTime: 0.028369 },
  {
    date: "2020-10-19",
    close: 121.43,
    volume: 123832235,
    change: -3.11,
    changePercent: -2.6576,
    changeOverTime: 0.00149,
  },
  {
    date: "2020-10-20",
    close: 119.87,
    volume: 129474368,
    change: 1.53,
    changePercent: 1.3453,
    changeOverTime: 0.015104,
  },
  {
    date: "2020-10-21",
    close: 117.4,
    volume: 93606039,
    change: -0.66,
    changePercent: -0.5487,
    changeOverTime: 0.009268,
  },
  {
    date: "2020-10-22",
    close: 120.39,
    volume: 104427767,
    change: -1.15,
    changePercent: -0.9712,
    changeOverTime: -0.000519,
  },
  {
    date: "2020-10-23",
    close: 117.15,
    volume: 84769322,
    change: -0.72,
    changePercent: -0.6159,
    changeOverTime: -0.006872,
  },
  {
    date: "2020-10-26",
    close: 119.41,
    volume: 117251443,
    change: 0.01,
    changePercent: 0.0091,
    changeOverTime: -0.006861,
  },
  { date: "2020-10-27", close: 118.6, volume: 92761067, change: 1.58, changePercent: 1.3707, changeOverTime: 0.007013 },
  {
    date: "2020-10-28",
    close: 112.1,
    volume: 145676829,
    change: -5.6,
    changePercent: -4.8219,
    changeOverTime: -0.040662,
  },
  {
    date: "2020-10-29",
    close: 116.95,
    volume: 152782752,
    change: 4.29,
    changePercent: 3.836,
    changeOverTime: -0.004369,
  },
];
const example_3month = [
    { date: "2020-07-30", close: 97.13, volume: 163134227, change: 0, changePercent: 0, changeOverTime: 0 },
    {
      date: "2020-07-31",
      close: 107.46,
      volume: 386901361,
      change: 10.26,
      changePercent: 10.64,
      changeOverTime: 0.108826,
    },
    {
      date: "2020-08-03",
      close: 111.07,
      volume: 320444225,
      change: 2.69,
      changePercent: 2.5937,
      changeOverTime: 0.134807,
    },
    {
      date: "2020-08-04",
      close: 114.75,
      volume: 178530315,
      change: 0.74,
      changePercent: 0.6769,
      changeOverTime: 0.145544,
    },
    {
      date: "2020-08-05",
      close: 114.67,
      volume: 123223860,
      change: 0.4,
      changePercent: 0.3754,
      changeOverTime: 0.150591,
    },
    {
      date: "2020-08-06",
      close: 118.7,
      volume: 210380469,
      change: 3.99,
      changePercent: 3.5333,
      changeOverTime: 0.190757,
    },
    {
      date: "2020-08-07",
      close: 115.08,
      volume: 198224408,
      change: -2.8,
      changePercent: -2.5411,
      changeOverTime: 0.16229,
    },
    {
      date: "2020-08-10",
      close: 115.2,
      volume: 219344873,
      change: 1.67,
      changePercent: 1.5145,
      changeOverTime: 0.172546,
    },
    {
      date: "2020-08-11",
      close: 111.8,
      volume: 192355447,
      change: -3.47,
      changePercent: -3.0891,
      changeOverTime: 0.142297,
    },
    {
      date: "2020-08-12",
      close: 118.47,
      volume: 173061213,
      change: 3.76,
      changePercent: 3.4398,
      changeOverTime: 0.181728,
    },
    { date: "2020-08-13", close: 116.44, volume: 217526622, change: 2, changePercent: 1.8175, changeOverTime: 0.198005 },
    {
      date: "2020-08-14",
      close: 116.95,
      volume: 168704614,
      change: -0.1,
      changePercent: -0.0928,
      changeOverTime: 0.201364,
    },
    {
      date: "2020-08-17",
      close: 120.22,
      volume: 122237101,
      change: -0.3,
      changePercent: -0.2642,
      changeOverTime: 0.199481,
    },
    {
      date: "2020-08-18",
      close: 115.76,
      volume: 110360649,
      change: 0.97,
      changePercent: 0.842,
      changeOverTime: 0.203209,
    },
    { date: "2020-08-19", close: 118.95, volume: 151352412, change: 0.15, changePercent: 0.1313, changeOverTime: 0.2115 },
    {
      date: "2020-08-20",
      close: 119.25,
      volume: 130473225,
      change: 2.62,
      changePercent: 2.3224,
      changeOverTime: 0.23605,
    },
    {
      date: "2020-08-21",
      close: 126.95,
      volume: 340242156,
      change: 6.1,
      changePercent: 5.2592,
      changeOverTime: 0.304245,
    },
    {
      date: "2020-08-24",
      close: 126.36,
      volume: 356557068,
      change: 1.54,
      changePercent: 1.2101,
      changeOverTime: 0.321291,
    },
    {
      date: "2020-08-25",
      close: 127.47,
      volume: 217474241,
      change: -1.06,
      changePercent: -0.8355,
      changeOverTime: 0.310091,
    },
    { date: "2020-08-26", close: 129.48, volume: 169918584, change: 1.7, changePercent: 1.378, changeOverTime: 0.320238 },
    {
      date: "2020-08-27",
      close: 126.68,
      volume: 159359296,
      change: -1.53,
      changePercent: -1.2424,
      changeOverTime: 0.314032,
    },
    {
      date: "2020-08-28",
      close: 127.54,
      volume: 195679384,
      change: -0.2,
      changePercent: -0.1631,
      changeOverTime: 0.300473,
    },
    {
      date: "2020-08-31",
      close: 131.51,
      volume: 233798095,
      change: 4.24,
      changePercent: 3.5501,
      changeOverTime: 0.343003,
    },
    {
      date: "2020-09-01",
      close: 139.41,
      volume: 152960158,
      change: 5.31,
      changePercent: 4.027,
      changeOverTime: 0.412808,
    },
    {
      date: "2020-09-02",
      close: 132.8,
      volume: 203989053,
      change: -2.87,
      changePercent: -2.1014,
      changeOverTime: 0.371765,
    },
    {
      date: "2020-09-03",
      close: 120.9,
      volume: 260291687,
      change: -10.64,
      changePercent: -8.1299,
      changeOverTime: 0.26654,
    },
    {
      date: "2020-09-04",
      close: 125.9,
      volume: 338075877,
      change: 0.08,
      changePercent: 0.0666,
      changeOverTime: 0.267419,
    },
    {
      date: "2020-09-08",
      close: 117.9,
      volume: 242863332,
      change: -8.45,
      changePercent: -6.8995,
      changeOverTime: 0.180929,
    },
    { date: "2020-09-09", close: 119.2, volume: 179611854, change: 4.6, changePercent: 4.1024, changeOverTime: 0.228068 },
    {
      date: "2020-09-10",
      close: 118.91,
      volume: 183405590,
      change: -3.9,
      changePercent: -3.3811,
      changeOverTime: 0.184832,
    },
    { date: "2020-09-11", close: 117, volume: 183617053, change: -1.5, changePercent: -1.3663, changeOverTime: 0.165928 },
    {
      date: "2020-09-14",
      close: 115.46,
      volume: 140162180,
      change: 3.47,
      changePercent: 3.1147,
      changeOverTime: 0.207549,
    },
    {
      date: "2020-09-15",
      close: 116.55,
      volume: 187703828,
      change: 0.19,
      changePercent: 0.1626,
      changeOverTime: 0.203803,
    },
    {
      date: "2020-09-16",
      close: 115.66,
      volume: 156080512,
      change: -3.53,
      changePercent: -3.0523,
      changeOverTime: 0.169931,
    },
    {
      date: "2020-09-17",
      close: 115.41,
      volume: 182958780,
      change: -1.84,
      changePercent: -1.6127,
      changeOverTime: 0.149666,
    },
    {
      date: "2020-09-18",
      close: 107.3,
      volume: 301366175,
      change: -3.5,
      changePercent: -3.329,
      changeOverTime: 0.115272,
    },
    {
      date: "2020-09-21",
      close: 114.76,
      volume: 202458766,
      change: 3.26,
      changePercent: 3.1503,
      changeOverTime: 0.145853,
    },
    { date: "2020-09-22", close: 116.05, volume: 187077555, change: 1.8, changePercent: 1.6352, changeOverTime: 0.16472 },
    {
      date: "2020-09-23",
      close: 110.7,
      volume: 151386500,
      change: -4.88,
      changePercent: -4.3165,
      changeOverTime: 0.116669,
    },
    { date: "2020-09-24", close: 112.42, volume: 168041851, change: 1.2, changePercent: 1.061, changeOverTime: 0.130879 },
    {
      date: "2020-09-25",
      close: 112.58,
      volume: 156504044,
      change: 4.16,
      changePercent: 3.7652,
      changeOverTime: 0.173951,
    },
    {
      date: "2020-09-28",
      close: 119.18,
      volume: 140122260,
      change: 2.77,
      changePercent: 2.4071,
      changeOverTime: 0.204121,
    },
    {
      date: "2020-09-29",
      close: 117.23,
      volume: 102973934,
      change: -0.9,
      changePercent: -0.7847,
      changeOverTime: 0.19277,
    },
    {
      date: "2020-09-30",
      close: 121.21,
      volume: 144103102,
      change: 1.77,
      changePercent: 1.5806,
      changeOverTime: 0.206481,
    },
    { date: "2020-10-01", close: 119.95, volume: 120815885, change: 1, changePercent: 0.861, changeOverTime: 0.216437 },
    {
      date: "2020-10-02",
      close: 114.82,
      volume: 149891076,
      change: -3.82,
      changePercent: -3.361,
      changeOverTime: 0.179225,
    },
    { date: "2020-10-05", close: 118, volume: 111405953, change: 3.65, changePercent: 3.1531, changeOverTime: 0.212273 },
    {
      date: "2020-10-06",
      close: 116.54,
      volume: 168627915,
      change: -3.43,
      changePercent: -2.989,
      changeOverTime: 0.185112,
    },
    { date: "2020-10-07", close: 120.82, volume: 99134591, change: 1.93, changePercent: 1.7626, changeOverTime: 0.19937 },
    {
      date: "2020-10-08",
      close: 115.45,
      volume: 86253170,
      change: -0.11,
      changePercent: -0.0973,
      changeOverTime: 0.197086,
    },
    { date: "2020-10-09", close: 119.26, volume: 104149511, change: 2, changePercent: 1.8217, changeOverTime: 0.219079 },
    { date: "2020-10-12", close: 130.1, volume: 241494231, change: 7.63, changePercent: 6.655, changeOverTime: 0.29671 },
    {
      date: "2020-10-13",
      close: 121.6,
      volume: 269251987,
      change: -3.4,
      changePercent: -2.7801,
      changeOverTime: 0.265991,
    },
    {
      date: "2020-10-14",
      close: 122.59,
      volume: 152812685,
      change: 0.09,
      changePercent: 0.0744,
      changeOverTime: 0.268421,
    },
    {
      date: "2020-10-15",
      close: 120.73,
      volume: 114696288,
      change: -0.5,
      changePercent: -0.4039,
      changeOverTime: 0.262444,
    },
    { date: "2020-10-16", close: 123.28, volume: 117899578, change: -1.7, changePercent: -1.4, changeOverTime: 0.246245 },
    {
      date: "2020-10-19",
      close: 117.49,
      volume: 124897771,
      change: -3.17,
      changePercent: -2.6024,
      changeOverTime: 0.210513,
    },
    {
      date: "2020-10-20",
      close: 117.84,
      volume: 128052958,
      change: 1.58,
      changePercent: 1.3407,
      changeOverTime: 0.231134,
    },
    {
      date: "2020-10-21",
      close: 121.53,
      volume: 94028326,
      change: -0.67,
      changePercent: -0.5584,
      changeOverTime: 0.215742,
    },
    {
      date: "2020-10-22",
      close: 118.98,
      volume: 106461274,
      change: -1.14,
      changePercent: -0.9585,
      changeOverTime: 0.206422,
    },
    {
      date: "2020-10-23",
      close: 115.12,
      volume: 86659478,
      change: -0.74,
      changePercent: -0.6415,
      changeOverTime: 0.202645,
    },
    {
      date: "2020-10-26",
      close: 119.04,
      volume: 111933330,
      change: 0.01,
      changePercent: 0.0087,
      changeOverTime: 0.20511,
    },
    { date: "2020-10-27", close: 120.4, volume: 92783503, change: 1.56, changePercent: 1.4067, changeOverTime: 0.21289 },
    {
      date: "2020-10-28",
      close: 113.1,
      volume: 144540928,
      change: -5.6,
      changePercent: -4.7058,
      changeOverTime: 0.163746,
    },
    {
      date: "2020-10-29",
      close: 117.25,
      volume: 151260313,
      change: 4.21,
      changePercent: 3.739,
      changeOverTime: 0.200274,
    },
  ];
// let example = [{"date":"2020-09-30","close":115.81,"volume":147802174,"change":0,"changePercent":0,"changeOverTime":0},{"date":"2020-10-01","close":117.52,"volume":120150266,"change":0.99,"changePercent":0.8851,"changeOverTime":0.008778},{"date":"2020-10-02","close":113.06,"volume":148678326,"change":-3.81,"changePercent":-3.353,"changeOverTime":-0.024976},{"date":"2020-10-05","close":121.7,"volume":109197512,"change":3.5,"changePercent":3.1462,"changeOverTime":0.0062},{"date":"2020-10-06","close":114.31,"volume":162884876,"change":-3.41,"changePercent":-3.003,"changeOverTime":-0.0235},{"date":"2020-10-07","close":118.88,"volume":97736082,"change":1.92,"changePercent":1.7248,"changeOverTime":-0.006511},{"date":"2020-10-08","close":117.67,"volume":84093721,"change":-0.11,"changePercent":-0.0989,"changeOverTime":-0.007574},{"date":"2020-10-09","close":121.61,"volume":101151674,"change":2,"changePercent":1.7543,"changeOverTime":0.010158},{"date":"2020-10-12","close":129,"volume":251540290,"change":7.54,"changePercent":6.4991,"changeOverTime":0.074988},{"date":"2020-10-13","close":122.3,"volume":262405608,"change":-3.4,"changePercent":-2.6772,"changeOverTime":0.04737},{"date":"2020-10-14","close":123.58,"volume":156250851,"change":0.09,"changePercent":0.0769,"changeOverTime":0.046476},{"date":"2020-10-15","close":122.56,"volume":116960081,"change":-0.5,"changePercent":-0.4095,"changeOverTime":0.043017},{"date":"2020-10-16","close":120.17,"volume":116046841,"change":-1.77,"changePercent":-1.4,"changeOverTime":0.02807},{"date":"2020-10-19","close":118.82,"volume":121766426,"change":-3.11,"changePercent":-2.5904,"changeOverTime":0.001519},{"date":"2020-10-20","close":118.57,"volume":125796641,"change":1.58,"changePercent":1.3608,"changeOverTime":0.015045},{"date":"2020-10-21","close":122.69,"volume":93779222,"change":-0.67,"changePercent":-0.5638,"changeOverTime":0.009511},{"date":"2020-10-22","close":120.1,"volume":103067495,"change":-1.17,"changePercent":-0.9853,"changeOverTime":-0.00053},{"date":"2020-10-23","close":119.96,"volume":82890938,"change":-0.72,"changePercent":-0.6191,"changeOverTime":-0.006656},{"date":"2020-10-26","close":116.63,"volume":112141396,"change":0.01,"changePercent":0.0088,"changeOverTime":-0.006784},{"date":"2020-10-27","close":121.1,"volume":92726010,"change":1.59,"changePercent":1.361,"changeOverTime":0.0069},{"date":"2020-10-28","close":115.6,"volume":144546989,"change":-5.6,"changePercent":-4.8517,"changeOverTime":-0.039923},{"date":"2020-10-29","close":115.73,"volume":151706364,"change":4.28,"changePercent":3.8,"changeOverTime":-0.004318}]
