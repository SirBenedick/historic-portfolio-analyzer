(this["webpackJsonphistoric-portfolio-analyzer"]=this["webpackJsonphistoric-portfolio-analyzer"]||[]).push([[0],{138:function(e,t,r){},162:function(e,t,r){"use strict";r.r(t);var a=r(3),n=r(0),o=r.n(n),i=r(16),c=r.n(i),s=(r(138),r(13)),l=r(29),u=r(11),f=r(2),b=r(212),d=r(23),p=r(230),h=r(229),m=r(226),y=r(211),g=r(228),j=r(59),S=r(231),k=r(209),O=r(105),x=r.n(O),v=r(107),T=r.n(v),P=r(106),w=r.n(P),D=r(164),F=r(214),A=r(232),V=r(108),R=r.n(V),C=r(109),B=r.n(C),I=r(6),M=r.n(I),_=r(12),E=r(21),L=r(18),N=r(7),Y=r(48),U=r.n(Y),H=r(110);"indexedDB"in window||console.log("This browser doesn't support IndexedDB");var q=Object(H.a)("historic-portfolio-analyzer",2,{upgrade:function(e){e.objectStoreNames.contains("symbolDataStore")||(console.log("Creating new symbolDataStore"),e.createObjectStore("symbolDataStore",{keyPath:"symbol",autoIncrement:!1})),e.objectStoreNames.contains("configStore")||(console.log("Creating new configStore"),e.createObjectStore("configStore"))}}),z=new function(){var e=this;Object(N.k)(this,{notifications:[],keys:{API_TOKEN_MISSING:"API_TOKEN_MISSING",PORTFOLIO_CALCULATING:"PORTFOLIO_CALCULATING",API_TOKEN_STORED:"API_TOKEN_STORED"},enqueueSnackbar:Object(N.f)((function(t){e.notifications.push(Object(l.a)({key:t.key?t.key:(new Date).getTime()+Math.random()},t))})),removeSnackbar:Object(N.f)((function(t){e.notifications=e.notifications.filter((function(e){return e.key!==t}))}))})},G={get:function(e){return Object(_.a)(M.a.mark((function t(){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q;case 2:return t.abrupt("return",t.sent.get("configStore",e));case 3:case"end":return t.stop()}}),t)})))()},set:function(e,t){return Object(_.a)(M.a.mark((function r(){return M.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,q;case 2:return r.abrupt("return",r.sent.put("configStore",t,e));case 3:case"end":return r.stop()}}),r)})))()},delete:function(e){return Object(_.a)(M.a.mark((function t(){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q;case 2:return t.abrupt("return",t.sent.delete("configStore",e));case 3:case"end":return t.stop()}}),t)})))()},clear:function(){return Object(_.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q;case 2:return e.abrupt("return",e.sent.clear("configStore"));case 3:case"end":return e.stop()}}),e)})))()},keys:function(){return Object(_.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q;case 2:return e.abrupt("return",e.sent.getAllKeys("configStore"));case 3:case"end":return e.stop()}}),e)})))()}};function W(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",a=r.length,n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*a));return t}var K=new(function(){function e(){var t=this;Object(E.a)(this,e),this.alphaVantage={url:"https://www.alphavantage.co/query",apiToken:""},this.isRunningSetup=!0,this.alphaVantageConstants={SYMBOL_SEARCH:"SYMBOL_SEARCH",TIME_SERIES_DAILY_ADJUSTED:"TIME_SERIES_DAILY_ADJUSTED"},this.riskFreeRate=1,this.startSetup(),Object(N.p)(this,{alphaVantage:N.q,isRunningSetup:N.q,riskFreeRate:N.q,setAlphaVantageAPITokenHelper:N.f,setIsRunningSetup:N.f,setRiskFreeRate:N.f}),Object(N.g)((function(){var e=t.riskFreeRate;t.isRunningSetup||Z.calculateAndSetPortfolioSharpRatio(),console.log("Autorun: triggering sharp ratio rercalculation: "+JSON.stringify(e))}))}return Object(L.a)(e,[{key:"startSetup",value:function(){var e=Object(_.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("startSetup"),e.next=3,G.get("alphaVantagAPIToken");case 3:if(!(t=e.sent)){e.next=8;break}this.setAlphaVantageAPITokenHelper(t),e.next=10;break;case 8:return e.next=10,this.setAlphaVantageAPITokenIDB(W(16));case 10:pe.addSymbol({symbolTicker:"AAPL",name:"Apple Inc.",region:"testRegion",currency:"USD"}),this.setIsRunningSetup(!1);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setIsRunningSetup",value:function(e){this.isRunningSetup=e}},{key:"setAlphaVantageAPITokenIDB",value:function(){var e=Object(_.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.set("alphaVantagAPIToken",t);case 2:z.enqueueSnackbar({message:"Stored new API-Token".concat(this.alphaVantage.apiToken),options:{variant:"success",autoHideDuration:1e3},key:z.keys.API_TOKEN_STORED}),this.setAlphaVantageAPITokenHelper(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setAlphaVantageAPITokenHelper",value:function(e){console.log("setAlphaVantageAPITokenHelper: "+e),this.alphaVantage.apiToken=e}},{key:"setRiskFreeRate",value:function(e){console.log("setRiskFreeRate: "+e),this.riskFreeRate=e}}]),e}()),J=r(98),$=r.n(J),X={calculateAndStoreSharpRatio:function(e){return Object(_.a)(M.a.mark((function t(){var r,a,n,o,i;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=K.riskFreeRate/100+1,a=[],n=[],e.forEach((function(e,t){a.push(e.value),n.push(Math.pow(r,1/252*t))})),o=$.a.sharpeRatio(a,n),i=o*Math.pow(252,.5),t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})))()}},Z=new(function(){function e(){Object(E.a)(this,e),this.portfolioSharpRatio=0,Object(N.p)(this,{portfolioSharpRatio:N.q,calculateAndSetPortfolioSharpRatio:N.f})}return Object(L.a)(e,[{key:"calculateAndSetPortfolioSharpRatio",value:function(){var e=Object(_.a)(M.a.mark((function e(){var t,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.portfolioSharpRatio=0,e.next=3,oe.getSymbolTimeseriesDataFromMap("Portfolio");case 3:if(0===(t=e.sent).length){e.next=11;break}return e.next=7,X.calculateAndStoreSharpRatio(t);case 7:r=e.sent,this.portfolioSharpRatio=r,e.next=12;break;case 11:this.portfolioSharpRatio=0;case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),Q={get:function(e){return Object(_.a)(M.a.mark((function t(){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q;case 2:return t.abrupt("return",t.sent.get("symbolDataStore",e));case 3:case"end":return t.stop()}}),t)})))()},set:function(e){return Object(_.a)(M.a.mark((function t(){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q;case 2:return t.abrupt("return",t.sent.put("symbolDataStore",e));case 3:case"end":return t.stop()}}),t)})))()},delete:function(e){return Object(_.a)(M.a.mark((function t(){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q;case 2:return t.abrupt("return",t.sent.delete("symbolDataStore",e));case 3:case"end":return t.stop()}}),t)})))()},clear:function(){return Object(_.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q;case 2:return e.abrupt("return",e.sent.clear("symbolDataStore"));case 3:case"end":return e.stop()}}),e)})))()},keys:function(){return Object(_.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q;case 2:return e.abrupt("return",e.sent.getAllKeys("symbolDataStore"));case 3:case"end":return e.stop()}}),e)})))()},getAdjustedCloseByTickerAndDate:function(e,t){var r=this;return Object(_.a)(M.a.mark((function a(){var n;return M.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.get(e);case 2:if(!(n=a.sent)||!("time_series_daily"in n)){a.next=6;break}if(!n.time_series_daily[t]){a.next=6;break}return a.abrupt("return",n.time_series_daily[t]["5. adjusted close"]);case 6:return a.abrupt("return",!1);case 7:case"end":return a.stop()}}),a)})))()},getTimeSeriesDailyByTicker:function(e){var t=this;return Object(_.a)(M.a.mark((function r(){var a;return M.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.get(e);case 2:if(!((a=r.sent)&&"time_series_daily"in a&&a.time_series_daily)){r.next=5;break}return r.abrupt("return",a.time_series_daily);case 5:return r.abrupt("return",!1);case 6:case"end":return r.stop()}}),r)})))()},getTimeSeriesDailyByTickerFormated:function(e){var t=this;return Object(_.a)(M.a.mark((function r(){var a;return M.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("getTimeSeriesDailyByTickerFormated: "+e),r.next=3,t.get(e);case 3:if(!((a=r.sent)&&"time_series_daily"in a&&a.time_series_daily)){r.next=6;break}return r.abrupt("return",ee(a));case 6:return r.abrupt("return",!1);case 7:case"end":return r.stop()}}),r)})))()},formatAndStoreSymbolData:function(e,t){var r=this;return Object(_.a)(M.a.mark((function a(){var n,o;return M.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={symbol_ticker:t["Meta Data"]["2. Symbol"],date_fetched:t["Meta Data"]["3. Last Refreshed"],time_zone:t["Meta Data"]["5. Time Zone"]},o={symbol:e,meta_data:n,time_series_daily:t["Time Series (Daily)"]},a.next=4,r.set(o);case 4:case"end":return a.stop()}}),a)})))()},calculateAndStoreHistoricPortfolioPerformance:function(){return Object(_.a)(M.a.mark((function e(){var t,r,a,n,o,i,c,l,u;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("calculateAndStoreHistoricPortfolioPerformance"),z.enqueueSnackbar({message:"Calculating Portfolio value",options:{variant:"info",autoHideDuration:2e3},key:z.keys.PORTFOLIO_CALCULATING}),oe.setIsCalculatingPortfolioPerformance(!0),console.log("Portfolio - calculating quantity"),t={},r=U()(pe.portfolioStartingDate),a=U()(),n=a.diff(r,"days")+1,e.next=10,Promise.all(pe.symbolsWithoutPortfolio.map(function(){var e=Object(_.a)(M.a.mark((function e(o){var i,c,s,l,u,f,b;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.getAdjustedCloseByTickerAndDate(o.symbolTicker,r.format("YYYY-MM-DD"));case 2:i=e.sent;case 3:if(i){e.next=10;break}return r.add(1,"days"),e.next=7,Q.getAdjustedCloseByTickerAndDate(o.symbolTicker,r.format("YYYY-MM-DD"));case 7:i=e.sent,e.next=3;break;case 10:return e.next=12,Q.getAdjustedCloseByTickerAndDate(o.symbolTicker,a.format("YYYY-MM-DD"));case 12:c=e.sent;case 13:if(c){e.next=20;break}return a.subtract(1,"days"),e.next=17,Q.getAdjustedCloseByTickerAndDate(o.symbolTicker,a.format("YYYY-MM-DD"));case 17:c=e.sent,e.next=13;break;case 20:s=parseFloat(c)/parseFloat(i)-1,pe.setPerformanceSincePortfolioStartForTicker(o.symbolTicker,s),l=s*(365/n),pe.setYearlyPerformanceSincePortfolioStartForTicker(o.symbolTicker,l),u=pe.getSymbolSetForTicker(o.symbolTicker).value,f=parseFloat(u)/parseFloat(i),t[o.symbolTicker]=f,b=c*f,pe.setEndValueForTicker(o.symbolTicker,b);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:for(console.log("Portfolio - list of dates"),o=[],i=U()(pe.portfolioStartingDate);i.isBefore();)o.push(i.format("YYYY-MM-DD")),i.add(1,"days");return console.log("Portfolio - calculating for each day"),c={},e.next=18,Promise.all(pe.symbolsWithoutPortfolio.map(function(){var e=Object(_.a)(M.a.mark((function e(t){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.getTimeSeriesDailyByTicker(t.symbolTicker);case 2:r=e.sent,c[t.symbolTicker]=r;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 18:return l=[],u=0,o.forEach((function(e){for(var r=0,a=0,n=Object.entries(c);a<n.length;a++){var o=Object(s.a)(n[a],2),i=o[0],f=o[1];if(f&&!(e in f))return;var b=f[e]["7. dividend amount"];u+=b*t[i],r+=f[e]["5. adjusted close"]*t[i]}r&&l.push({time:e,value:r})})),oe.setTimeseriesForTicker("Portfolio",l).then((function(e){if(0!==l.length){var t=l[0].value,r=l[l.length-1].value,a=parseFloat(r)/parseFloat(t)-1;pe.setPerformanceSincePortfolioStartForTicker("Portfolio",a);var o=a*(365/n);pe.setYearlyPerformanceSincePortfolioStartForTicker("Portfolio",o),pe.setTotalDividendPayoutForTicker("Portfolio",u),pe.setEndValueForTicker("Portfolio",r),Z.calculateAndSetPortfolioSharpRatio()}})),oe.setIsCalculatingPortfolioPerformance(!1),e.abrupt("return",l);case 24:case"end":return e.stop()}}),e)})))()}},ee=function(e){for(var t=[],r=0,a=Object.entries(e.time_series_daily);r<a.length;r++){var n=Object(s.a)(a[r],2),o=n[0],i=n[1];t.push({time:String(o),value:parseFloat(i["5. adjusted close"])})}return t.reverse()},te=Q,re=r(78),ae=r.n(re),ne={fetchDataDailyAdjustedForSymbolAlphaVantage:function(e){return Object(_.a)(M.a.mark((function t(){var r;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("fetchDataDailyAdjustedForSymbolAlphaVantage"),console.log("Fetching data for ".concat(e)),z.enqueueSnackbar({message:"Fetching data for: ".concat(e),options:{variant:"info",autoHideDuration:1500},key:"FETCHING-".concat(e)}),t.prev=3,t.next=6,ae.a.get(K.alphaVantage.url,{params:{function:K.alphaVantageConstants.TIME_SERIES_DAILY_ADJUSTED,symbol:e,outputsize:"full",apikey:K.alphaVantage.apiToken}});case 6:if(!("Note"in(r=t.sent).data)){t.next=13;break}return console.log("Failed to fetch for: "+e),z.enqueueSnackbar({message:"Failed to fetch data for: ".concat(e),options:{variant:"warning",autoHideDuration:1500},key:"FETCHING-FAILED-".concat(e)}),t.abrupt("return",!1);case 13:return t.next=15,te.formatAndStoreSymbolData(e,r.data);case 15:return z.enqueueSnackbar({message:"Successfully fetched data for: ".concat(e),options:{variant:"success",autoHideDuration:1500},key:"FETCHING-SUCCESS-".concat(e)}),t.abrupt("return",e);case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(3),console.log(Object.keys(t.t0),t.t0.message);case 22:case"end":return t.stop()}}),t,null,[[3,19]])})))()},searchAlphaVantageByKeywords:function(e){return Object(_.a)(M.a.mark((function t(){var r,a,n;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("searchAlphaVantageByKeywords: "+e),t.next=3,ae.a.get(K.alphaVantage.url,{params:{function:K.alphaVantageConstants.SYMBOL_SEARCH,keywords:e,apikey:K.alphaVantage.apiToken}});case 3:if(!("Note"in(r=t.sent).data)){t.next=10;break}return console.log("Failed to search for:"+e),z.enqueueSnackbar({message:"Failed to search for: ".concat(e),options:{variant:"warning"}}),t.abrupt("return",!1);case 10:if(a=r.data.bestMatches){t.next=13;break}return t.abrupt("return",[]);case 13:return n=a.map((function(e){return{symbolTicker:e["1. symbol"],name:e["2. name"],region:e["4. region"],currency:e["8. currency"]}})),t.abrupt("return",n);case 15:case"end":return t.stop()}}),t)})))()}},oe=new(function(){function e(){Object(E.a)(this,e),this.isCalculatingPortfolioPerformance=!1,this.symbolChartTimeseriesDataMap={Portfolio:[]},Object(N.p)(this,{isCalculatingPortfolioPerformance:N.q,symbolChartTimeseriesDataMap:N.q,setIsCalculatingPortfolioPerformance:N.f,addSymbolToMap:N.f,removeSymbolFromMap:N.f,setTimeseriesForTicker:N.f})}return Object(L.a)(e,[{key:"setIsCalculatingPortfolioPerformance",value:function(e){this.isCalculatingPortfolioPerformance=e}},{key:"addSymbolToMap",value:function(){var e=Object(_.a)(M.a.mark((function e(t){var r,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("addSymbolToMap: "+t),e.next=3,te.getTimeSeriesDailyByTickerFormated(t);case 3:if(!(r=e.sent)){e.next=8;break}this.setTimeseriesForTicker(t,r),e.next=18;break;case 8:if(!K.alphaVantage.apiToken){e.next=17;break}return e.next=11,ne.fetchDataDailyAdjustedForSymbolAlphaVantage(t);case 11:return e.next=13,te.getTimeSeriesDailyByTickerFormated(t);case 13:(a=e.sent)&&this.setTimeseriesForTicker(t,a),e.next=18;break;case 17:z.enqueueSnackbar({message:"Please enter an API key on the Settings Page",options:{variant:"error",autoHideDuration:2500},key:z.keys.API_TOKEN_MISSING});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeSymbolFromMap",value:function(){var e=Object(_.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.symbolChartTimeseriesDataMap[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSymbolTimeseriesDataFromMap",value:function(){var e=Object(_.a)(M.a.mark((function e(t){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("getSymbolTimeseriesDataFromMap: "+t),!this.symbolChartTimeseriesDataMap[t]){e.next=5;break}return e.abrupt("return",this.symbolChartTimeseriesDataMap[t]);case 5:if("Portfolio"!==t){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,ne.fetchDataDailyAdjustedForSymbolAlphaVantage(t);case 11:return e.next=13,te.getTimeSeriesDailyByTickerFormated(t);case 13:return(r=e.sent)&&this.setTimeseriesForTicker(t,r),e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setTimeseriesForTicker",value:function(){var e=Object(_.a)(M.a.mark((function e(t,r){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("setTimeseriesForTicker: "+t),this.symbolChartTimeseriesDataMap[t]=r;case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"calculateAndStoreHistoricPortfolioPerformance",value:function(){var e=Object(_.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.calculateAndStoreHistoricPortfolioPerformance();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getMetaDataForSymbol",value:function(){var e=Object(_.a)(M.a.mark((function e(t){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.get(t);case 2:return r=e.sent,e.abrupt("return",r.meta_data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),ie=function(){function e(){var t=this;Object(E.a)(this,e),this.symbols=[{symbolTicker:"Portfolio",name:"Portfolio",isVisible:!0,value:0,currency:"USD",performanceSincePortfolioStart:1,yearlyPerformanceSincePortfolioStart:1,color:this.nextAvailableColorValue(),endValue:0,dateFetched:"-"}],this.pendingRequests=0,this.appleData=[],this.portfolioStartingDate="",this.triggerRecalculatePortfolio=!1,this.triggerRecalculatePortfolioTimeout=null,this.triggerRerenderVisibleLines=!1,this.portfolioBuilderSetting="ticker",Object(N.p)(this,{symbols:N.q,portfolioBuilderSetting:N.q,triggerRecalculatePortfolio:N.q,triggerRerenderVisibleLines:N.q,portfolioStartingDate:N.q,toggleSymbolVisibility:N.f,addSymbol:N.f,removeSelectedSymbol:N.f,setValueForTicker:N.f,setPerformanceSincePortfolioStartForTicker:N.f,setYearlyPerformanceSincePortfolioStartForTicker:N.f,setEndValueForTicker:N.f,setTriggerRecalculatePortfolio:N.f,setTriggerRerenderVisibleLines:N.f,setTotalDividendPayoutForTicker:N.f,setSharpRatioForTicker:N.f,setPortfolioStartingDate:N.f,setPortfolioBuilderSetting:N.f,totalValueOfSymbols:N.h,listOfSymbolTickers:N.h,symbolsWithoutPortfolio:N.h,symbolPortfolioOnly:N.h,symbolsSortedByTickerPortfolioFirst:N.h,symbolsSortedByTickerWithoutPortfolio:N.h,symbolsSortedByPortfolioBuilderSetting:N.h}),this.portfolioStartingDate=U()().subtract(1,"years").format("YYYY-MM-DD"),Object(N.g)((function(){var e=t.portfolioStartingDate,r=t.totalValueOfSymbols;t.triggerRecalculatePortfolioTimeout&&clearTimeout(t.triggerRecalculatePortfolioTimeout);var a=setTimeout(Object(_.a)(M.a.mark((function a(){return M.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.setTriggerRecalculatePortfolio(!0),console.log("Autorun: triggering portfolio rercalculation"+JSON.stringify(e)+JSON.stringify(r));case 1:case"end":return a.stop()}}),a)}))),500);t.triggerRecalculatePortfolioTimeout=a}))}return Object(L.a)(e,[{key:"setTriggerRecalculatePortfolio",value:function(e){this.triggerRecalculatePortfolio=e}},{key:"setTriggerRerenderVisibleLines",value:function(e){this.triggerRerenderVisibleLines=e}},{key:"addSymbol",value:function(){var e=Object(_.a)(M.a.mark((function e(t){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.symbolTicker){e.next=2;break}return e.abrupt("return",!1);case 2:return this.symbols.push({symbolTicker:t.symbolTicker,name:t.name,currency:t.currency,performanceSincePortfolioStart:1,yearlyPerformanceSincePortfolioStart:1,isVisible:!0,value:100,endValue:0,totalDividendPayout:0,color:this.nextAvailableColorValue(),dateFetched:"-"}),e.next=5,oe.addSymbolToMap(t.symbolTicker);case 5:return e.next=7,oe.getMetaDataForSymbol(t.symbolTicker);case 7:r=e.sent,this.setDateFetchedForTicker(t.symbolTicker,r.date_fetched),this.setTriggerRerenderVisibleLines(!0),this.setTriggerRecalculatePortfolio(!0);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeSelectedSymbol",value:function(){var e=Object(_.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.removeColorInUse(this.getSymbolSetForTicker(t).color),this.symbols=this.symbols.filter((function(e){return e.symbolTicker!==t})),e.next=4,oe.removeSymbolFromMap(t);case 4:this.setTriggerRerenderVisibleLines(!0),this.setTriggerRecalculatePortfolio(!0);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleSymbolVisibility",value:function(e){console.log(e),this.symbols.forEach((function(t){t.symbolTicker===e&&(t.isVisible=!t.isVisible)})),this.setTriggerRerenderVisibleLines(!0)}},{key:"setPortfolioStartingDate",value:function(e){this.portfolioStartingDate=e}},{key:"doesSymbolExist",value:function(){var e=Object(_.a)(M.a.mark((function e(t){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,this.symbols.forEach((function(e){e.symbolTicker===t&&(r=!0)})),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSymbolSetForTicker",value:function(e){return this.symbols.find((function(t){return t.symbolTicker===e}))}},{key:"setValueForTicker",value:function(e,t){console.log("Updating value: "+t),this.symbols.forEach((function(r){r.symbolTicker===e&&(r.value=t)}))}},{key:"setDateFetchedForTicker",value:function(e,t){console.log("Updating dateFetched: "+t),this.symbols.forEach((function(r){r.symbolTicker===e&&(r.dateFetched=t)}))}},{key:"setPerformanceSincePortfolioStartForTicker",value:function(e,t){console.log("Updating performanceSincePortfolioStart: "+t),this.symbols.forEach((function(r){r.symbolTicker===e&&(r.performanceSincePortfolioStart=t)}))}},{key:"setYearlyPerformanceSincePortfolioStartForTicker",value:function(e,t){console.log("Updating setYearlyPerformanceSincePortfolioStartForTicker: "+t),this.symbols.forEach((function(r){r.symbolTicker===e&&(r.yearlyPerformanceSincePortfolioStart=t)}))}},{key:"setEndValueForTicker",value:function(e,t){console.log("Updating setEndValueForTicker: "+t),this.symbols.forEach((function(r){r.symbolTicker===e&&(r.endValue=t)}))}},{key:"setTotalDividendPayoutForTicker",value:function(e,t){console.log("Updating setTotalDividendPayoutForTicker: "+t),this.symbols.forEach((function(r){r.symbolTicker===e&&(r.totalDividendPayout=t)}))}},{key:"setSharpRatioForTicker",value:function(e,t){console.log("Updating setSharpRatioForTicker: "+t),this.symbols.forEach((function(r){r.symbolTicker===e&&(r.sharpRatio=t)}))}},{key:"setPortfolioBuilderSetting",value:function(e){this.portfolioBuilderSetting=e}},{key:"nextAvailableColorValue",value:function(){for(var e=null,t=0;t<ce.length;t++){var r=ce[t];if(!r.isBegingUsed){e=r.colorValue,r.isBegingUsed=!0;break}}return e}},{key:"removeColorInUse",value:function(e){for(var t=0;t<ce.length;t++){var r=ce[t];if(r.colorValue===e){r.isBegingUsed=!1;break}}}},{key:"totalValueOfSymbols",get:function(){return this.symbols.reduce((function(e,t){return"Portfolio"!==t.symbolTicker?+e+ +t.value:e}),0)}},{key:"symbolsWithoutPortfolio",get:function(){return this.symbols.filter((function(e){return"Portfolio"!==e.symbolTicker}))}},{key:"symbolPortfolioOnly",get:function(){return this.symbols.filter((function(e){return"Portfolio"===e.symbolTicker}))}},{key:"symbolsSortedByTickerPortfolioFirst",get:function(){var e=this.symbols;return e=e.slice().sort(le)}},{key:"symbolsSortedByPortfolioBuilderSetting",get:function(){var e=this.symbols;return"ticker"===this.portfolioBuilderSetting?e=e.slice().sort(se):"name"===this.portfolioBuilderSetting?e=e.slice().sort(be):"performance_annualized"===this.portfolioBuilderSetting?e=e.slice().sort(ue):"performance_since_start"===this.portfolioBuilderSetting?e=e.slice().sort(fe):"value"===this.portfolioBuilderSetting&&(e=e.slice().sort(de)),e}},{key:"symbolsSortedByTickerWithoutPortfolio",get:function(){var e=this.symbols;return e=(e=e.filter((function(e){return"Portfolio"!==e.symbolTicker}))).slice().sort(le)}},{key:"listOfSymbolTickers",get:function(){return this.symbols.map((function(e){return e.symbolTicker}))}}]),e}(),ce=[{colorValue:"#3f51b5",isBegingUsed:!1},{colorValue:"#2196f3",isBegingUsed:!1},{colorValue:"#03a9f4",isBegingUsed:!1},{colorValue:"#00bcd4",isBegingUsed:!1},{colorValue:"#009688",isBegingUsed:!1},{colorValue:"#4caf50",isBegingUsed:!1},{colorValue:"#8bc34a",isBegingUsed:!1},{colorValue:"#cddc39",isBegingUsed:!1},{colorValue:"#ffeb3b",isBegingUsed:!1},{colorValue:"#ffc107",isBegingUsed:!1},{colorValue:"#ff9800",isBegingUsed:!1},{colorValue:"#ff5722",isBegingUsed:!1},{colorValue:"#f44336",isBegingUsed:!1},{colorValue:"#e91e63",isBegingUsed:!1},{colorValue:"#9c27b0",isBegingUsed:!1},{colorValue:"#673ab7",isBegingUsed:!1}],se=function(e,t){return e.symbolTicker<t.symbolTicker?-1:e.symbolTicker>t.symbolTicker?1:0},le=function(e,t){return"Portfolio"===t.symbolTicker?1:e.symbolTicker<t.symbolTicker?-1:e.symbolTicker>t.symbolTicker?1:0},ue=function(e,t){return e.yearlyPerformanceSincePortfolioStart>t.yearlyPerformanceSincePortfolioStart?-1:e.yearlyPerformanceSincePortfolioStart<t.yearlyPerformanceSincePortfolioStart?1:0},fe=function(e,t){return e.performanceSincePortfolioStart>t.performanceSincePortfolioStart?-1:e.performanceSincePortfolioStart<t.performanceSincePortfolioStart?1:0},be=function(e,t){return e.name<t.name?-1:e.name>t.name?1:0},de=function(e,t){return e.value>t.value?-1:e.value<t.value?1:0},pe=new ie,he=r(215),me=r(80),ye=r(111),ge=r(213),je=r(237),Se=r(79),ke=r.n(Se),Oe=r(102),xe=r.n(Oe),ve=r(103),Te=r.n(ve),Pe=r(101),we=r.n(Pe),De=r(17),Fe=r(233),Ae=r(241),Ve=r(235),Re=Object(Ae.a)({matchFrom:"any",stringify:function(e){return"".concat(e.symbolTicker,"-").concat(e.name)}}),Ce=Object(De.c)((function(e){var t=e.dataStore,r=e.notificationStore,n=o.a.useState([]),i=Object(s.a)(n,2),c=i[0],u=i[1],f=o.a.useState(!1),b=Object(s.a)(f,2),d=b[0],p=b[1],h=o.a.useState(null),m=Object(s.a)(h,2),y=m[0],g=m[1],S=o.a.useState(c[0]),k=Object(s.a)(S,2),O=k[0],x=k[1],v=function(){var e=Object(_.a)(M.a.mark((function e(t){var r,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(){var e=Object(_.a)(M.a.mark((function e(t){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,ne.searchAlphaVantageByKeywords(t);case 3:r=e.sent,p(!1),r&&u(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y&&clearTimeout(y),t){e.next=4;break}return e.abrupt("return");case 4:a=setTimeout(Object(_.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:case"end":return e.stop()}}),e)}))),500),g(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(_.a)(M.a.mark((function e(a){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.doesSymbolExist(a.symbolTicker);case 2:e.sent?r.enqueueSnackbar({message:"Symbol: ".concat(a.symbolTicker," already part of portfolio"),options:{variant:"warning",autoHideDuration:2e3},key:"SYMBOL-DUPLICATE-".concat(a.symbolTicker)}):t.addSymbol(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(Ve.a,{id:"combo-box-demo",loading:d,value:O,onChange:function(e,t){x(""),t&&t.symbolTicker&&T(t)},options:c,filterOptions:Re,renderOption:function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)(j.a,{children:e.name}),Object(a.jsxs)(j.a,{variant:"caption",children:[e.symbolTicker," - ",e.region," - ",e.currency]})]})},renderInput:function(e){return Object(a.jsx)(Fe.a,Object(l.a)(Object(l.a)({},e),{},{label:"Add Asset",variant:"outlined",onChange:function(e){return v(e.target.value)}}))},style:{minWidth:"100px",paddingRight:"10px"}})})),Be=Object(b.a)((function(e){return{root:{display:"flex",justifyContent:"center",flexWrap:"wrap",listStyle:"none",padding:e.spacing(.5),margin:0},chip:{margin:e.spacing(.5)}}})),Ie=Object(De.c)((function(e){var t=e.dataStore,r=e.notificationStore,n=Be(),i=o.a.useState(null),c=Object(s.a)(i,2),l=c[0],u=c[1],f=o.a.useState(null),b=Object(s.a)(f,2),d=b[0],p=b[1],h=function(){u(null)};return Object(a.jsxs)(me.a,{className:n.root,children:[Object(a.jsxs)(ye.a,{id:"simple-menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:h,children:[Object(a.jsxs)(ge.a,{children:[Object(a.jsx)(F.a,{children:Object(a.jsx)(ke.a,{fontSize:"small"})}),Object(a.jsx)(j.a,{variant:"inherit",noWrap:!0,children:d?d.symbolTicker:null})]}),Object(a.jsxs)(ge.a,{children:[Object(a.jsx)(F.a,{children:Object(a.jsx)(we.a,{fontSize:"small"})}),Object(a.jsx)(j.a,{variant:"inherit",noWrap:!0,children:d?d.currency:"-"})]}),Object(a.jsxs)(ge.a,{children:[Object(a.jsx)(F.a,{children:Object(a.jsx)(xe.a,{fontSize:"small"})}),Object(a.jsx)(j.a,{variant:"inherit",noWrap:!0,children:d?d.dateFetched:"-"})]}),Object(a.jsxs)(ge.a,{onClick:function(){return e=d.symbolTicker,t.removeSelectedSymbol(e),void h();var e},children:[Object(a.jsx)(F.a,{children:Object(a.jsx)(Te.a,{fontSize:"small"})}),Object(a.jsx)(j.a,{variant:"inherit",noWrap:!0,color:"error",children:"Remove"})]})]}),Object(a.jsxs)(he.a,{container:!0,spacing:1,alignItems:"center",children:[Object(a.jsx)(he.a,{item:!0,xs:8,children:Object(a.jsx)(he.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:t.symbolsSortedByTickerPortfolioFirst.map((function(e){return Object(a.jsx)(je.a,{label:e.symbolTicker,onClick:(r=e.symbolTicker,function(){t.toggleSymbolVisibility(r)}),onDelete:"Portfolio"!==e.symbolTicker&&function(t){return function(e,t){p(t),u(e.currentTarget)}(t,e)},deleteIcon:Object(a.jsx)(ke.a,{}),className:n.chip,color:e.isVisible?"primary":"default",clickable:!0,style:{backgroundColor:e.isVisible?e.color:"#eeeeee"}},e.symbolTicker);var r}))})}),Object(a.jsx)(he.a,{item:!0,xs:4,children:Object(a.jsx)(Ce,{dataStore:t,notificationStore:r})})]})]})})),Me=r(30),_e=r(32),Ee=r(73),Le=r(74),Ne=r(218),Ye=r(216),Ue=r(217),He=r(239);function qe(e){var t=e.selectedChartStyleType,r=e.switchStyle,n=o.a.useState({checkedA:!0}),i=Object(s.a)(n,2),c=i[0],f=i[1];return Object(a.jsx)(Ye.a,{row:!0,children:Object(a.jsx)(Ue.a,{control:Object(a.jsx)(He.a,{checked:c.checkedA,onChange:function(e){f(Object(l.a)(Object(l.a)({},c),{},Object(u.a)({},e.target.name,e.target.checked))),r()},name:"checkedA"}),label:t})})}var ze=Object(De.c)((function(e){var t=e.dataStore,r=e.recalculateAndRenderPortfolio;return Object(n.useEffect)((function(){return Object(N.g)((function(){console.log("Trigger - TriggerRecalculatePortfolio"),t.triggerRecalculatePortfolio&&r(),t.setTriggerRecalculatePortfolio(!1)}))})),Object(a.jsx)("div",{})})),Ge=Object(De.c)((function(e){var t=e.dataStore,r=e.rerenderVisibleLines;return Object(n.useEffect)((function(){return Object(N.g)((function(){console.log("Trigger - TriggerShowVisibleLines"),t.triggerRerenderVisibleLines&&r(),t.setTriggerRerenderVisibleLines(!1)}))})),Object(a.jsx)("div",{})})),We=function(e){Object(_e.a)(r,e);var t=Object(Ee.a)(r);function r(e){var a;return Object(E.a)(this,r),(a=t.call(this,e)).state={data:[],selectedChartStyleType:"percent"},a.myRef=o.a.createRef(),a.chart={},a.lineSeriesObj={},a.recalculateAndRenderPortfolio=a.recalculateAndRenderPortfolio.bind(Object(Me.a)(a)),a.rerenderVisibleLines=a.rerenderVisibleLines.bind(Object(Me.a)(a)),a.switchStyle=a.switchStyle.bind(Object(Me.a)(a)),a.createGraphForSelectedSymbols=a.createGraphForSelectedSymbols.bind(Object(Me.a)(a)),a.addLineSeriesData=a.addLineSeriesData.bind(Object(Me.a)(a)),a}return Object(L.a)(r,[{key:"componentDidMount",value:function(){var e=Object(_.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.renderChart(),this.props.configStore.isRunningSetup||this.createGraphForSelectedSymbols();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderChart",value:function(){this.myRef.current.firstChild&&(this.myRef.current.removeChild(this.myRef.current.firstChild),this.chart=null),this.chart=Object(Le.b)(this.myRef.current,"percent"===this.state.selectedChartStyleType?$e:Je)}},{key:"recalculateAndRenderPortfolio",value:function(){var e=Object(_.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.calculateAndStoreHistoricPortfolioPerformance();case 2:this.addLineSeriesData(this.props.dataStore.getSymbolSetForTicker("Portfolio"));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rerenderVisibleLines",value:function(){this.createGraphForSelectedSymbols()}},{key:"switchStyle",value:function(){console.log("switching style"),"absolut"===this.state.selectedChartStyleType?(this.setState({selectedChartStyleType:"percent"}),this.chart.applyOptions($e)):"percent"===this.state.selectedChartStyleType&&(this.setState({selectedChartStyleType:"absolut"}),this.chart.applyOptions(Je))}},{key:"createGraphForSelectedSymbols",value:function(){var e=Object(_.a)(M.a.mark((function e(){var t,r,a,n,o,i,c=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(console.log("createGraphForSelectedSymbols"),t=this.props.dataStore.listOfSymbolTickers,r=0,a=Object.entries(this.lineSeriesObj);r<a.length;r++)n=Object(s.a)(a[r],2),o=n[0],i=n[1],t.includes(o)||(this.chart.removeSeries(i.series),delete this.lineSeriesObj[o]);this.props.dataStore.symbols.forEach((function(e){if(e.isVisible)c.addLineSeriesData(e);else if(c.lineSeriesObj[e.symbolTicker]&&c.lineSeriesObj[e.symbolTicker].series){var t=c.lineSeriesObj[e.symbolTicker].series;c.chart.removeSeries(t),delete c.lineSeriesObj[e.symbolTicker]}}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addLineSeriesData",value:function(){var e=Object(_.a)(M.a.mark((function e(t){var r,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("addLineSeriesData: "+t.symbolTicker),e.next=3,oe.getSymbolTimeseriesDataFromMap(t.symbolTicker);case 3:r=e.sent,this.lineSeriesObj[t.symbolTicker]?r&&0!==r.length&&this.lineSeriesObj[t.symbolTicker].series.setData(r):(a=this.chart.addLineSeries({color:t.color}),r&&0!==r.length&&a.setData(r),this.lineSeriesObj[t.symbolTicker]={series:a,color:t.color});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(a.jsxs)(me.a,{style:{padding:"10px"},children:[Object(a.jsx)(qe,{refreshData:this.refreshData,switchStyle:this.switchStyle,selectedChartStyleType:"absolut"===this.state.selectedChartStyleType?"absolut":"percent"}),Object(a.jsx)(Ke,{symbolDataStore:this.props.symbolDataStore}),Object(a.jsx)("div",{ref:this.myRef,id:"chart-ref"}),Object(a.jsx)(ze,{dataStore:this.props.dataStore,recalculateAndRenderPortfolio:this.recalculateAndRenderPortfolio}),Object(a.jsx)(Ge,{dataStore:this.props.dataStore,rerenderVisibleLines:this.rerenderVisibleLines})]})}}]),r}(o.a.Component),Ke=Object(De.c)((function(e){var t=e.symbolDataStore;return Object(a.jsx)("div",{children:t.isCalculatingPortfolioPerformance?Object(a.jsx)(Ne.a,{}):null})})),Je={height:300,rightPriceScale:{scaleMargins:{top:.1,bottom:.1},mode:Le.a.Normal,borderColor:"rgba(197, 203, 206, 0.4)"}},$e={height:300,rightPriceScale:{scaleMargins:{top:.1,bottom:.1},mode:Le.a.Percentage,borderColor:"rgba(197, 203, 206, 0.4)"}},Xe=r(219),Ze=r(220),Qe=r(221),et=r(222),tt=r(223),rt=r(224),at=r(45),nt=Object(b.a)({});function ot(e){return(100*parseFloat(e)).toFixed(2)+"%"}var it=Object(at.c)((function(e){var t=e.dataStore,r=nt(),n=1,o=function(e){if("Portfolio"===e)return null;var t=n+".";return n++,t},i=function(e){t.setPortfolioBuilderSetting(e)};return Object(a.jsx)(Xe.a,{component:me.a,children:Object(a.jsxs)(Ze.a,{className:r.table,"aria-label":"simple table",size:"small",children:[Object(a.jsx)(Qe.a,{children:Object(a.jsxs)(et.a,{children:[Object(a.jsx)(tt.a,{children:"No."}),Object(a.jsx)(tt.a,{onClick:function(){return i("ticker")},children:"Symbol"}),Object(a.jsx)(tt.a,{onClick:function(){return i("name")},children:"Name"}),Object(a.jsx)(tt.a,{id:"annualized",align:"right",onClick:function(){return i("performance_annualized")},children:"Annualized Performance"}),Object(a.jsx)(tt.a,{id:"performance",align:"right",onClick:function(){return i("performance_since_start")},children:"Performance since start"}),Object(a.jsx)(tt.a,{align:"right",style:{maxWidth:"80px"},onClick:function(){return i("value")},children:"Value"})]})}),Object(a.jsxs)(rt.a,{children:[t.symbolsSortedByPortfolioBuilderSetting.map((function(e){return Object(a.jsxs)(et.a,{children:[Object(a.jsx)(tt.a,{component:"th",scope:"row",children:o(e.symbolTicker)}),Object(a.jsx)(tt.a,{component:"th",scope:"row",children:"Portfolio"===e.symbolTicker?Object(a.jsx)("b",{children:e.symbolTicker}):e.symbolTicker}),Object(a.jsx)(tt.a,{align:"left",children:"Portfolio"===e.name?Object(a.jsx)("b",{children:e.name}):e.name}),Object(a.jsx)(tt.a,{align:"right",children:ot(e.yearlyPerformanceSincePortfolioStart)}),Object(a.jsx)(tt.a,{align:"right",children:ot(e.performanceSincePortfolioStart)}),Object(a.jsx)(tt.a,{align:"right",children:"Portfolio"===e.symbolTicker?Object(a.jsxs)(j.a,{noWrap:!0,children:["End: $",e.endValue.toFixed(2)]}):Object(a.jsx)("input",{type:"text",value:e.value,onChange:function(r){return t.setValueForTicker(e.symbolTicker,r.target.value)},style:{maxWidth:"60px"}})})]},e.symbolTicker)})),Object(a.jsx)(tt.a,{}),Object(a.jsx)(tt.a,{}),Object(a.jsx)(tt.a,{}),Object(a.jsx)(tt.a,{}),Object(a.jsx)(tt.a,{}),Object(a.jsx)(tt.a,{align:"right",children:Object(a.jsxs)(j.a,{noWrap:!0,children:["Total: $",t.totalValueOfSymbols]})})]})]})})})),ct=r(225),st=Object(b.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,width:e.spacing(20),height:e.spacing(20)},title:{fontSize:14}}}));var lt=function(e){var t,r=e.titel,n=e.description,o=e.value,i=void 0===o?0:o,c=e.showPercent,s=void 0!==c&&c,l=st();return Object(a.jsx)("div",{className:l.root,children:Object(a.jsx)(me.a,{className:l.paper,children:Object(a.jsxs)(he.a,{container:!0,item:!0,direction:"column",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(he.a,{item:!0,children:Object(a.jsx)(j.a,{className:l.title,color:"textSecondary",gutterBottom:!0,children:r})}),Object(a.jsx)(he.a,{item:!0,children:Object(a.jsx)(j.a,{variant:"h3",component:"h2",children:i?s?(t=i,(100*parseFloat(t)).toFixed(0)+"%"):i.toFixed(2):Object(a.jsx)(ct.a,{})})}),Object(a.jsx)(he.a,{item:!0,children:Object(a.jsx)(j.a,{variant:"caption",component:"p",children:n})})]})})})},ut=Object(b.a)((function(e){return{root:{flexGrow:1,padding:0,margin:0},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,width:e.spacing(20),height:e.spacing(20)},title:{fontSize:14}}})),ft=Object(De.c)((function(e){var t=e.dataStore,r=e.keyMetricsStore,n=ut();return Object(a.jsx)("div",{className:n.root,children:Object(a.jsxs)(he.a,{container:!0,spacing:3,justify:"space-evenly",alignItems:"center",children:[Object(a.jsx)(he.a,{item:!0,xs:2,children:Object(a.jsx)(lt,{titel:"Peformance",description:"Portfolio performance since start",value:t.getSymbolSetForTicker("Portfolio").performanceSincePortfolioStart,showPercent:!0})}),Object(a.jsx)(he.a,{item:!0,xs:2,children:Object(a.jsx)(lt,{titel:"Annualized",description:"Annualized portfolio performance since start",value:t.getSymbolSetForTicker("Portfolio").yearlyPerformanceSincePortfolioStart,showPercent:!0})}),Object(a.jsx)(he.a,{item:!0,xs:2,children:Object(a.jsx)(lt,{titel:"Dividend",description:"Dividends payed out since start",value:t.getSymbolSetForTicker("Portfolio").totalDividendPayout})}),Object(a.jsx)(he.a,{item:!0,xs:2,children:Object(a.jsx)(lt,{titel:"Sharp Ratio",description:"Calculated based on set risk free rate",value:r.portfolioSharpRatio})})]})})})),bt=r(240),dt=r(104),pt=r(24),ht=r(234),mt=Object(at.c)((function(e){var t=e.dataStore;return Object(a.jsx)(pt.a,{utils:dt.a,children:Object(a.jsx)(ht.a,{disableToolbar:!0,variant:"inline",format:"yyyy-MM-DD",margin:"normal",id:"date-picker-starting-datet",label:"Starting date",value:t.portfolioStartingDate,onChange:function(e){var r=e.format("YYYY-MM-DD");/^\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/.exec(r)&&t.setPortfolioStartingDate(r)},KeyboardButtonProps:{"aria-label":"change date"}})})})),yt=Object(b.a)((function(e){return{root:{flexWrap:"wrap",listStyle:"none",padding:e.spacing(2)},gridItem:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),gt=[{value:-1.5,label:"-1.5%"},{value:0,label:"0%"},{value:1,label:"1%"},{value:5,label:"5%"},{value:10,label:"10%"}];function jt(e){return"".concat(e,"%")}var St=Object(De.c)((function(e){var t=e.configStore,r=e.dataStore,n=yt();return Object(a.jsxs)(me.a,{className:n.root,elevation:1,children:[Object(a.jsx)(j.a,{variant:"h4",gutterBottom:!0,children:"Configurations"}),Object(a.jsxs)(he.a,{container:!0,spacing:3,xs:12,justify:"center",alignItems:"center",children:[Object(a.jsx)(he.a,{item:!0,xs:6,style:{backgroundColor:""},className:n.gridItem,children:Object(a.jsx)(mt,{dataStore:r})}),Object(a.jsxs)(he.a,{item:!0,xs:6,style:{backgroundColor:""},className:n.gridItem,children:[Object(a.jsxs)(j.a,{id:"discrete-slider-custom",gutterBottom:!0,children:["Risk Free Rate: ",JSON.stringify(t.riskFreeRate),"%"]}),Object(a.jsx)(bt.a,{defaultValue:t.riskFreeRate,getAriaValueText:jt,"aria-labelledby":"discrete-slider-custom",min:-1.5,max:10,step:.1,valueLabelDisplay:"auto",marks:gt,onChangeCommitted:function(e,r){return t.setRiskFreeRate(r)}})]})]})]})})),kt=function(e){var t=e.dataStore,r=e.notificationStore,n=e.configStore,o=e.symbolDataStore,i=e.keyMetricsStore;return Object(a.jsx)("div",{children:Object(a.jsxs)(he.a,{container:!0,spacing:3,children:[Object(a.jsx)(he.a,{item:!0,xs:12,spacing:3,children:Object(a.jsx)(Ie,{dataStore:t,notificationStore:r})}),Object(a.jsx)(he.a,{item:!0,xs:12,spacing:3,children:Object(a.jsx)(ft,{dataStore:t,keyMetricsStore:i})}),Object(a.jsx)(he.a,{item:!0,xs:12,children:Object(a.jsx)(We,{dataStore:t,configStore:n,symbolDataStore:o})}),Object(a.jsx)(he.a,{item:!0,xs:12,children:Object(a.jsx)(it,{dataStore:t})}),Object(a.jsx)(he.a,{item:!0,xs:12,children:Object(a.jsx)(St,{configStore:n,dataStore:t})})]})})},Ot=r(227),xt=function(e){var t=e.configStore;return Object(a.jsx)("div",{children:Object(a.jsxs)(me.a,{elevation:1,style:{padding:"20px"},children:[Object(a.jsx)(j.a,{variant:"h1",gutterBottom:!0,children:"Settings"}),Object(a.jsx)(j.a,{variant:"h6",gutterBottom:!0,children:"Alpha Vantag API Token"}),Object(a.jsx)(Fe.a,{id:"outlined-basic",label:"API-Token",variant:"outlined",defaultValue:t.alphaVantage.apiToken,onChange:function(e){return t.setAlphaVantageAPITokenIDB(e.target.value)}}),Object(a.jsxs)(j.a,{variant:"caption",display:"block",gutterBottom:!0,children:["Get your free token here:"," ",Object(a.jsx)(Ot.a,{href:"https://www.alphavantage.co/support/#api-key",target:"_blank",rel:"noreferrer",children:"Alpha Vantage"})," ","(Hint: try a random key)"]})]})})},vt=r(31),Tt=r(72),Pt=function(e){Object(_e.a)(r,e);var t=Object(Ee.a)(r);function r(){var e;Object(E.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).displayed=[],e.storeDisplayed=function(t){e.displayed=[].concat(Object(vt.a)(e.displayed),[t])},e}return Object(L.a)(r,[{key:"removeDisplayedNotificationByKey",value:function(e){this.displayed=this.displayed.filter((function(t){return e!==t}))}},{key:"componentDidMount",value:function(){var e=this;Object(N.g)((function(){var t=e.props.notificationStore.notifications;(void 0===t?[]:t).forEach((function(t){if(!e.displayed.includes(t.key)){e.props.enqueueSnackbar(t.message,t.options),e.storeDisplayed(t.key),e.props.notificationStore.removeSnackbar(t.key);var r=0;r=t.options&&t.options.autoHideDuration?t.options.autoHideDuration+100:2100,setTimeout(function(){this.removeDisplayedNotificationByKey(t.key)}.bind(e),r)}}))}))}},{key:"render",value:function(){return null}}]),r}(n.Component),wt=Object(Tt.b)(Object(at.b)("notificationStore")(Object(at.c)(Pt))),Dt=240,Ft=Object(b.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:Dt,width:"calc(100% - ".concat(Dt,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:Dt,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:Dt,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(u.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(l.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)}}}));var At=function(){var e,t,r=Ft(),n=Object(d.a)(),i=o.a.useState(!1),c=Object(s.a)(i,2),l=c[0],b=c[1],O=o.a.useState({chartingPage:{showPage:!0},settingsPage:{showPage:!1}}),v=Object(s.a)(O,2),P=v[0],V=v[1],C=function(e){for(var t={},r=0,a=Object.entries(P);r<a.length;r++){var n=Object(s.a)(a[r],1)[0];t[n]=n===e?{showPage:!0}:{showPage:!1}}V(t)};return Object(a.jsxs)("div",{className:r.root,children:[Object(a.jsx)(wt,{notificationStore:z}),Object(a.jsx)(g.a,{}),Object(a.jsx)(h.a,{position:"fixed",className:Object(f.a)(r.appBar,Object(u.a)({},r.appBarShift,l)),children:Object(a.jsxs)(m.a,{children:[Object(a.jsx)(k.a,{color:"inherit","aria-label":"open drawer",onClick:function(){b(!0)},edge:"start",className:Object(f.a)(r.menuButton,Object(u.a)({},r.hide,l)),children:Object(a.jsx)(x.a,{})}),Object(a.jsx)(j.a,{variant:"h6",noWrap:!0,children:"Historic-Portfolio-Analyzer (alpha)"})]})}),Object(a.jsxs)(p.a,{variant:"permanent",className:Object(f.a)(r.drawer,(e={},Object(u.a)(e,r.drawerOpen,l),Object(u.a)(e,r.drawerClose,!l),e)),classes:{paper:Object(f.a)((t={},Object(u.a)(t,r.drawerOpen,l),Object(u.a)(t,r.drawerClose,!l),t))},children:[Object(a.jsx)("div",{className:r.toolbar,children:Object(a.jsx)(k.a,{onClick:function(){b(!1)},children:"rtl"===n.direction?Object(a.jsx)(w.a,{}):Object(a.jsx)(T.a,{})})}),Object(a.jsx)(S.a,{}),Object(a.jsx)(y.a,{children:Object(a.jsxs)(D.a,{button:!0,onClick:function(){return C("chartingPage")},children:[Object(a.jsx)(F.a,{children:Object(a.jsx)(R.a,{})}),Object(a.jsx)(A.a,{primary:"Chart"})]},"charting-page")}),Object(a.jsx)(S.a,{}),Object(a.jsx)(y.a,{children:Object(a.jsxs)(D.a,{button:!0,onClick:function(){return C("settingsPage")},children:[Object(a.jsx)(F.a,{children:Object(a.jsx)(B.a,{})}),Object(a.jsx)(A.a,{primary:"Settings"})]},"serttings-page")})]}),Object(a.jsxs)("main",{className:r.content,children:[Object(a.jsx)("div",{className:r.toolbar}),P.chartingPage.showPage?Object(a.jsx)(kt,{dataStore:pe,notificationStore:z,configStore:K,symbolDataStore:oe,keyMetricsStore:Z}):null,P.settingsPage.showPage?Object(a.jsx)(xt,{configStore:K}):null]})]})},Vt=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,242)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,o=t.getLCP,i=t.getTTFB;r(e),a(e),n(e),o(e),i(e)}))};c.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(at.a,{notificationStore:z,children:Object(a.jsx)(Tt.a,{maxSnack:10,children:Object(a.jsx)(At,{})})})}),document.getElementById("root")),Vt()}},[[162,1,2]]]);
//# sourceMappingURL=main.7f5c4ab5.chunk.js.map